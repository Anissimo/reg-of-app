(function(){"use strict";var e={6691:function(e,t,a){var o=a(9242),l=a(3396),n=a(11),i=a(4075),r=a(4454),u=a(2329),c=a(8777),p=a(3140),s=a(9657);const d={class:"app"};var m={__name:"App",setup(e){return(e,t)=>{const a=(0,l.up)("RouterLink"),o=(0,l.up)("RouterView");return(0,l.wg)(),(0,l.iD)("div",d,[(0,l.Wm)(n._,null,{default:(0,l.w5)((()=>[(0,l.Wm)(r.s,null,{default:(0,l.w5)((()=>[(0,l.Wm)(s.V,{"expand-on-hover":"",rail:""},{default:(0,l.w5)((()=>[(0,l.Wm)(u.i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c.l,{"prepend-avatar":"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTjhQa4VP5dD6-xO9Ank6auvRE2MHaN3SAUmQ&usqp=CAU",title:"Grisha Anisimov",subtitle:"grishaanisimov@gmailcom"})])),_:1}),(0,l.Wm)(i.J),(0,l.Wm)(u.i,{density:"compact",nav:""},{default:(0,l.w5)((()=>[(0,l.Wm)(a,{class:"text-decoration-none",to:"/statement"},{default:(0,l.w5)((()=>[(0,l.Wm)(c.l,{"prepend-icon":"mdi-notebook",title:"Journal",value:"Journal"})])),_:1}),(0,l.Wm)(a,{class:"text-decoration-none",to:"/map"},{default:(0,l.w5)((()=>[(0,l.Wm)(c.l,{"prepend-icon":"mdi-compass",title:"Map",value:"Map"})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(p.O,{class:"main"},{default:(0,l.w5)((()=>[(0,l.Wm)(o)])),_:1})])),_:1})])),_:1})])}}},f=a(89);const v=(0,f.Z)(m,[["__scopeId","data-v-41b0b374"]]);var g=v,h=(a(7658),a(65)),y={typeOfAccident:{rush:"порыв",leak:"утечка",outdoorColumn:"колонка уличная",lowQualityWater:"некачественная вода",blockage:"закупорка",other:"другое"},typeOfPriorities:{immediate:"1 – незамедлительно",high:"2 – высокий",medium:"3 – средний",low:"4 – низкий"}};const w=(0,h.MT)({state:{applications:[{id:0,address:"ул. Авроры, 211А, Самара, Самарская обл., 443080",location:{x:39.723284,y:47.23135},typeOfAccident:y.typeOfAccident.rush,typeOfPriorities:y.typeOfPriorities.low,applicant:"Анисимов Григорий Васильевич",phoneNumber:"89277369542"}],search:"",dialog:!1,editingMode:!1},getters:{getApplicationById:e=>t=>e.applications.find((e=>e.id===t))},mutations:{addApplication(e,t){e.applications.push(t)},setSearch(e,t){e.search=t},setDialog(e,t){e.dialog=t},setEditingMode(e,t){e.editingMode=t},editApplication(e,t){e.editingApplication=t},updateApplication(e,{index:t,application:a}){e.applications.splice(t,1,a)},clearEditingApplication(e){e.editingApplication=null}},actions:{},modules:{dictionary:y}});var _=w,b=(a(9773),a(8727)),W=(0,b.Rd)({theme:{defaultTheme:"dark"}}),O=a(2483),k=a(4870),j=a(870),x=a(6572),A=a(1888),V=a(1334),P=a(3601),M=a(6824),S=a(3369),C=a(8521),N=a(9234),D=a(69),H=a(2900);const E=(0,l._)("span",{class:"text-h5"},"Создание заявки",-1),T={style:{height:"400px",width:"100%"}},U=(0,l._)("small",null,"*Заполните необходимые строки",-1);var q={__name:"MyDialog",setup(e){const t=(0,h.oR)(),a=(0,O.tv)(),o=(0,k.iH)(!1),i=(0,k.iH)({id:null,address:"",phoneNumber:"",typeOfAccident:"",typeOfPriorities:"",applicant:"",location:{x:null,y:null}}),r=(0,k.iH)([39.723284,47.23135]),u=(0,k.iH)("EPSG:4326"),c=(0,k.iH)(12),p=(0,k.iH)(!0);function s(e){const t=e.feature,a=t.getGeometry().getCoordinates();p.value=!1,i.value.location={x:a[0],y:a[1]}}const d=()=>{i.value={id:null,address:"",phoneNumber:"",typeOfAccident:"",typeOfPriorities:"",applicant:"",location:{x:null,y:null}}},m=()=>{o.value=!1,a.push({path:"/statement"})},f=()=>{if(t.state.editingMode){const e=t.state.applications.findIndex((e=>e.id===i.value.id));t.commit("updateApplication",{index:e,application:i.value})}else i.value.id=t.state.applications.length,t.state.applications.push(i.value);localStorage.setItem("applications",JSON.stringify(t.state.applications)),t.commit("clearEditingApplication"),t.commit("setDialog",!1),d(),a.push({path:"/statement"})},v=()=>{d(),t.commit("setEditingMode",!1),t.commit("setDialog",!0),a.push({path:"/statement/add"})};return(0,l.m0)((()=>{o.value=t.state.dialog,t.state.editingApplication&&(i.value={...t.state.editingApplication})})),(e,t)=>{const a=(0,l.up)("ol-view"),d=(0,l.up)("ol-source-osm"),g=(0,l.up)("ol-tile-layer"),h=(0,l.up)("ol-style-stroke"),y=(0,l.up)("ol-style-fill"),w=(0,l.up)("ol-style"),_=(0,l.up)("ol-interaction-draw"),b=(0,l.up)("ol-source-vector"),W=(0,l.up)("ol-style-circle"),O=(0,l.up)("ol-vector-layer"),k=(0,l.up)("ol-map");return(0,l.wg)(),(0,l.j4)(M.o,{justify:"start ml-0"},{default:(0,l.w5)((()=>[(0,l.Wm)(P.B,{modelValue:o.value,"onUpdate:modelValue":t[6]||(t[6]=e=>o.value=e),persistent:"",width:"1024"},{activator:(0,l.w5)((({props:e})=>[(0,l.Wm)(j.T,(0,l.dG)({class:"ml-4",color:"primary"},e,{onClick:v}),{default:(0,l.w5)((()=>[(0,l.Uk)(" Создайте новую заявку! ")])),_:2},1040)])),default:(0,l.w5)((()=>[(0,l.Wm)(n._,null,{default:(0,l.w5)((()=>[(0,l.Wm)(x.E,null,{default:(0,l.w5)((()=>[E])),_:1}),(0,l.Wm)(A.Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(S.K,null,{default:(0,l.w5)((()=>[(0,l._)("form",null,[(0,l.Wm)(M.o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(C.D,{cols:"12",md:"12"},{default:(0,l.w5)((()=>[(0,l.Wm)(H.h,{modelValue:i.value.applicant,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value.applicant=e),label:"ФИО*"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(C.D,{cols:"12",md:"12"},{default:(0,l.w5)((()=>[(0,l.Wm)(H.h,{modelValue:i.value.address,"onUpdate:modelValue":t[1]||(t[1]=e=>i.value.address=e),label:"Адрес"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(C.D,{cols:"12",md:"12"},{default:(0,l.w5)((()=>[(0,l._)("div",T,[(0,l.Wm)(k,{"load-tiles-while-animating":!0,"load-tiles-while-interacting":!0,style:{height:"400px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(a,{ref:"view",center:r.value,zoom:c.value,projection:u.value},null,8,["center","zoom","projection"]),(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d)])),_:1}),(0,l.Wm)(O,null,{default:(0,l.w5)((()=>[(0,l.Wm)(b,{projection:u.value},{default:(0,l.w5)((()=>[p.value?((0,l.wg)(),(0,l.j4)(_,{key:0,type:"Point",onDrawend:s},{default:(0,l.w5)((()=>[(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h,{color:"blue",width:2}),(0,l.Wm)(y,{color:"rgba(0, 0, 0, 0.4)"})])),_:1})])),_:1})):(0,l.kq)("",!0)])),_:1},8,["projection"]),(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h,{color:"red",width:2}),(0,l.Wm)(y,{color:"rgba(255,255,255,0.1)"}),(0,l.Wm)(W,{radius:5},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{color:"black"})])),_:1})])),_:1})])),_:1})])),_:1})])])),_:1}),(0,l.Wm)(C.D,{cols:"12",md:"12"},{default:(0,l.w5)((()=>[(0,l.Wm)(H.h,{modelValue:i.value.phoneNumber,"onUpdate:modelValue":t[2]||(t[2]=e=>i.value.phoneNumber=e),label:"Phone Number"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(C.D,{cols:"12"},{default:(0,l.w5)((()=>[(0,l.Wm)(D.rL,{modelValue:i.value.typeOfAccident,"onUpdate:modelValue":t[3]||(t[3]=e=>i.value.typeOfAccident=e),items:["порыв","утечка","колонка уличная","некачественная вода","закупорка","другое"],label:"Тип аварии*",required:""},null,8,["modelValue"])])),_:1}),(0,l.Wm)(C.D,{cols:"12"},{default:(0,l.w5)((()=>[(0,l.Wm)(D.rL,{modelValue:i.value.typeOfPriorities,"onUpdate:modelValue":t[4]||(t[4]=e=>i.value.typeOfPriorities=e),items:["1 – незамедлительно","2 – высокий","3 – средний","4 – низкий"],label:"Приоритет*",required:""},null,8,["modelValue"])])),_:1})])),_:1})])])),_:1}),U])),_:1}),(0,l.Wm)(V.h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(N.C),(0,l.Wm)(j.T,{color:"blue-darken-1",variant:"text",onClick:m},{default:(0,l.w5)((()=>[(0,l.Uk)(" Close ")])),_:1}),(0,l.Wm)(j.T,{color:"blue-darken-1",variant:"text",onClick:t[5]||(t[5]=e=>{f(),o.value=!1})},{default:(0,l.w5)((()=>[(0,l.Uk)(" Save ")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}}};const z=q;var I=z,R=a(7139),G=a(2123),J={__name:"OLMap",props:{locationX:{type:Number,required:!1,default:39.723284},locationY:{type:Number,required:!1,default:47.23135},zoom:{type:Number,required:!0,default:12},locations:{type:Array,required:!0},draggableMarkers:{type:Boolean,required:!1,default:!1}},setup(e){const t=e,a=(0,k.iH)("EPSG:4326"),o=(0,k.iH)(0),n=(0,l.f3)("ol-format"),i=(0,k.iH)(null);(0,k.iH)(!1),(0,k.iH)(0),(0,k.iH)(0),(0,k.iH)(null),new n.GeoJSON;(0,l.bv)((()=>{if(t.draggableMarkers){const e=new G.Z;i.value.getInteractions().extend([e]),e.on("translateend",(e=>{const t=e.features.item(0),a=t.getGeometry().getCoordinates();console.log("Marker moved to: ",a)}))}}));const r=e=>{const t={"1 – незамедлительно":"red","2 – высокий":"orange","3 – средний":"yellow","4 – низкий":"green"};return t[e]||"blue"};return(t,n)=>{const u=(0,l.up)("ol-view"),c=(0,l.up)("ol-source-osm"),p=(0,l.up)("ol-tile-layer"),s=(0,l.up)("ol-geom-point"),d=(0,l.up)("ol-style-fill"),m=(0,l.up)("ol-style-stroke"),f=(0,l.up)("ol-style-circle"),v=(0,l.up)("ol-style"),g=(0,l.up)("ol-feature"),h=(0,l.up)("ol-source-vector"),y=(0,l.up)("ol-vector-layer"),w=(0,l.up)("ol-map");return(0,l.wg)(),(0,l.j4)(w,{ref_key:"mapRef",ref:i,"load-tiles-while-animating":!0,"load-tiles-while-interacting":!0,style:{height:"100%",width:"100%"}},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{ref:"view",center:[e.locationX,e.locationY],zoom:e.zoom,rotation:o.value,projection:a.value},null,8,["center","zoom","rotation","projection"]),(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c)])),_:1}),(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.locations,((e,t)=>((0,l.wg)(),(0,l.j4)(g,{key:t},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{coordinates:[e.x,e.y]},null,8,["coordinates"]),(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(f,{radius:5},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{color:r(e.priority)},null,8,["color"]),(0,l.Wm)(m,{color:"black",width:2})])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1},512)}}};const L=J;var Z=L;const F={class:"last"},B={style:{height:"200px",width:"100%"}};var Y={__name:"MyCard",props:{app:{type:Object,required:!0}},setup(e){const t=(0,h.oR)(),a=(0,O.tv)(),o=e=>{t.commit("editApplication",e),t.commit("setEditingMode",!0),t.commit("setDialog",!0),a.push({name:"edit",params:{id:e.id}})};return(t,a)=>((0,l.wg)(),(0,l.iD)("div",{class:"table-with-apps-app",onClick:a[0]||(a[0]=t=>o(e.app))},[(0,l._)("div",null,"Адрес: "+(0,R.zw)(e.app.address),1),(0,l._)("div",null," Тип аварии: "+(0,R.zw)(e.app.typeOfAccident),1),(0,l._)("div",null," Приоритет: "+(0,R.zw)(e.app.typeOfPriorities),1),(0,l._)("div",null,"Заявитель: "+(0,R.zw)(e.app.applicant),1),(0,l._)("div",F,"Телефон: "+(0,R.zw)(e.app.phoneNumber),1),(0,l._)("div",B,[(0,l.Wm)(Z,{"location-x":e.app.location.x,"location-y":e.app.location.y,locations:[{x:e.app.location.x,y:e.app.location.y,priority:e.app.typeOfPriorities}]},null,8,["location-x","location-y","locations"])])]))}};const K=(0,f.Z)(Y,[["__scopeId","data-v-136e17ef"]]);var Q=K,X={__name:"SearchComponent",setup(e){const t=(0,h.oR)(),a=(0,k.iH)(t.state.search),o=()=>{t.commit("setSearch",a.value)};return(e,t)=>((0,l.wg)(),(0,l.j4)(H.h,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e),"append-icon":"mdi-magnify",label:"Поиск","single-line":"","hide-details":"",class:"search-input",onInput:o},null,8,["modelValue"]))}};const $=(0,f.Z)(X,[["__scopeId","data-v-7ffbedb9"]]);var ee=$,te=a(6556);const ae={class:"app"},oe={class:"d-flex mt-8 my-4"};var le={__name:"MyJournal",setup(e){const t=(0,h.oR)(),a=(0,k.iH)(1);localStorage.getItem("applications")&&(t.state.applications=JSON.parse(localStorage.getItem("applications")));const n=(0,l.Fl)((()=>{if(t.state.search){const e=t.state.search.toLowerCase();return t.state.applications.filter((t=>Object.values(t).some((t=>t.toString().toLowerCase().includes(e)))))}return t.state.applications})),i=(0,l.Fl)((()=>{const e=4*(a.value-1),t=e+4;return n.value.slice(e,t)}));return(e,t)=>((0,l.wg)(),(0,l.iD)("div",ae,[(0,l.Wm)(ee,{class:"my-4"}),(0,l.Wm)(I,{class:"my-4"}),(0,l.Wm)(o.W3,{name:"list",tag:"div",class:"table-with-apps my-4"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.value,(e=>((0,l.wg)(),(0,l.j4)(Q,{key:e.id,app:e},null,8,["app"])))),128))])),_:1}),(0,l._)("div",oe,[(0,l.Wm)(te.k,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e),length:Math.ceil(n.value.length/4),"total-visible":7,class:"pagination"},null,8,["modelValue","length"])])]))}};const ne=le;var ie=ne,re={__name:"MyMap",setup(e){const t=(0,h.oR)(),a=()=>{const e=localStorage.getItem("applications");return e?JSON.parse(e):[]};t.state.applications=a(),(0,l.m0)((()=>{t.state.applications=a()}));const o=(0,l.Fl)((()=>t.state.applications.map((e=>({x:e.location.x,y:e.location.y,priority:e.typeOfPriorities})))));return(e,t)=>((0,l.wg)(),(0,l.j4)(Z,{style:{height:"100vh"},locations:o.value},null,8,["locations"]))}};const ue=re;var ce=ue,pe=(0,O.p7)({history:(0,O.r5)(),routes:[{path:"/",redirect:"/statement"},{path:"/statement",name:"journal",component:ie,children:[{path:"add",name:"dialog",component:I},{path:":id",name:"edit",component:I,props:!0}]},{path:"/map",name:"map",component:ce}]});async function se(){const e=await a.e(461).then(a.t.bind(a,3657,23));e.load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}var de=a(3998);se(),(0,o.ri)(g).use(_).use(pe).use(W).use(de.ZP).mount("#app")}},t={};function a(o){var l=t[o];if(void 0!==l)return l.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,o,l,n){if(!o){var i=1/0;for(p=0;p<e.length;p++){o=e[p][0],l=e[p][1],n=e[p][2];for(var r=!0,u=0;u<o.length;u++)(!1&n||i>=n)&&Object.keys(a.O).every((function(e){return a.O[e](o[u])}))?o.splice(u--,1):(r=!1,n<i&&(i=n));if(r){e.splice(p--,1);var c=l();void 0!==c&&(t=c)}}return t}n=n||0;for(var p=e.length;p>0&&e[p-1][2]>n;p--)e[p]=e[p-1];e[p]=[o,l,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};a.t=function(o,l){if(1&l&&(o=this(o)),8&l)return o;if("object"===typeof o&&o){if(4&l&&o.__esModule)return o;if(16&l&&"function"===typeof o.then)return o}var n=Object.create(null);a.r(n);var i={};e=e||[null,t({}),t([]),t(t)];for(var r=2&l&&o;"object"==typeof r&&!~e.indexOf(r);r=t(r))Object.getOwnPropertyNames(r).forEach((function(e){i[e]=function(){return o[e]}}));return i["default"]=function(){return o},a.d(n,i),n}}(),function(){a.d=function(e,t){for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,o){return a.f[o](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/webfontloader.f6b3c0db.js"}}(),function(){a.miniCssF=function(e){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="reg-of-app:";a.l=function(o,l,n,i){if(e[o])e[o].push(l);else{var r,u;if(void 0!==n)for(var c=document.getElementsByTagName("script"),p=0;p<c.length;p++){var s=c[p];if(s.getAttribute("src")==o||s.getAttribute("data-webpack")==t+n){r=s;break}}r||(u=!0,r=document.createElement("script"),r.charset="utf-8",r.timeout=120,a.nc&&r.setAttribute("nonce",a.nc),r.setAttribute("data-webpack",t+n),r.src=o),e[o]=[l];var d=function(t,a){r.onerror=r.onload=null,clearTimeout(m);var l=e[o];if(delete e[o],r.parentNode&&r.parentNode.removeChild(r),l&&l.forEach((function(e){return e(a)})),t)return t(a)},m=setTimeout(d.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=d.bind(null,r.onerror),r.onload=d.bind(null,r.onload),u&&document.head.appendChild(r)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var e={143:0};a.f.j=function(t,o){var l=a.o(e,t)?e[t]:void 0;if(0!==l)if(l)o.push(l[2]);else{var n=new Promise((function(a,o){l=e[t]=[a,o]}));o.push(l[2]=n);var i=a.p+a.u(t),r=new Error,u=function(o){if(a.o(e,t)&&(l=e[t],0!==l&&(e[t]=void 0),l)){var n=o&&("load"===o.type?"missing":o.type),i=o&&o.target&&o.target.src;r.message="Loading chunk "+t+" failed.\n("+n+": "+i+")",r.name="ChunkLoadError",r.type=n,r.request=i,l[1](r)}};a.l(i,u,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,o){var l,n,i=o[0],r=o[1],u=o[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(l in r)a.o(r,l)&&(a.m[l]=r[l]);if(u)var p=u(a)}for(t&&t(o);c<i.length;c++)n=i[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(p)},o=self["webpackChunkreg_of_app"]=self["webpackChunkreg_of_app"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=a.O(void 0,[998],(function(){return a(6691)}));o=a.O(o)})();
//# sourceMappingURL=app.f19cf65d.js.map