(function(){"use strict";var e={829:function(e,t,a){var o=a(9242),l=a(3396),n=a(4870),i=a(11),r=a(4075),u=a(4454),c=a(2329),s=a(8777),p=a(3140),d=a(9657);const m={class:"app"};var f={__name:"App",setup(e){(0,n.iH)(null);return(e,t)=>{const a=(0,l.up)("RouterLink"),o=(0,l.up)("RouterView");return(0,l.wg)(),(0,l.iD)("div",m,[(0,l.Wm)(i._,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u.s,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d.V,{"expand-on-hover":"",rail:""},{default:(0,l.w5)((()=>[(0,l.Wm)(c.i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(s.l,{"prepend-avatar":"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTjhQa4VP5dD6-xO9Ank6auvRE2MHaN3SAUmQ&usqp=CAU",title:"Grisha Anisimov",subtitle:"grishaanisimov@gmailcom"})])),_:1}),(0,l.Wm)(r.J),(0,l.Wm)(c.i,{density:"compact",nav:""},{default:(0,l.w5)((()=>[(0,l.Wm)(a,{class:"text-decoration-none",to:"/statement"},{default:(0,l.w5)((()=>[(0,l.Wm)(s.l,{"prepend-icon":"mdi-notebook",title:"Journal",value:"Journal"})])),_:1}),(0,l.Wm)(a,{class:"text-decoration-none",to:"/map"},{default:(0,l.w5)((()=>[(0,l.Wm)(s.l,{"prepend-icon":"mdi-compass",title:"Map",value:"Map"})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(p.O,{class:"main"},{default:(0,l.w5)((()=>[(0,l.Wm)(o)])),_:1})])),_:1})])),_:1})])}}},v=a(89);const g=(0,v.Z)(f,[["__scopeId","data-v-2ff2e964"]]);var h=g,y=(a(7658),a(65)),w={typeOfAccident:{rush:"порыв",leak:"утечка",outdoorColumn:"колонка уличная",lowQualityWater:"некачественная вода",blockage:"закупорка",other:"другое"},typeOfPriorities:{immediate:"1 – незамедлительно",high:"2 – высокий",medium:"3 – средний",low:"4 – низкий"}};const _=(0,y.MT)({state:{applications:[{id:0,address:"ул. Авроры, 211А, Самара, Самарская обл., 443080",location:{x:39.723284,y:47.23135},typeOfAccident:w.typeOfAccident.rush,typeOfPriorities:w.typeOfPriorities.low,applicant:"Анисимов Григорий Васильевич",phoneNumber:"89277369542"}],search:"",dialog:!1,editingMode:!1},getters:{getApplicationById:e=>t=>e.applications.find((e=>e.id===t))},mutations:{addApplication(e,t){e.applications.push(t)},setSearch(e,t){e.search=t},setDialog(e,t){e.dialog=t},setEditingMode(e,t){e.editingMode=t},editApplication(e,t){e.editingApplication=t},updateApplication(e,{index:t,application:a}){e.applications.splice(t,1,a)},clearEditingApplication(e){e.editingApplication=null}},actions:{},modules:{dictionary:w}});var b=_,W=(a(9773),a(8727)),O=(0,W.Rd)({theme:{defaultTheme:"dark"}}),k=a(2483),j=a(870),A=a(6572),x=a(1888),V=a(1334),P=a(3601),M=a(6824),N=a(3369),S=a(8521),C=a(9234),D=a(69),E=a(2900);const H=(0,l._)("span",{class:"text-h5"},"Создание заявки",-1),T={style:{height:"400px",width:"100%"}},U=(0,l._)("small",null,"*Заполните необходимые строки",-1);var q={__name:"MyDialog",setup(e){const t=(0,y.oR)(),a=(0,k.tv)(),o=(0,n.iH)(!1),r=(0,n.iH)({id:null,address:"",phoneNumber:"",typeOfAccident:"",typeOfPriorities:"",applicant:"",location:{x:null,y:null}}),u=(0,n.iH)([39.723284,47.23135]),c=(0,n.iH)("EPSG:4326"),s=(0,n.iH)(12),p=(0,n.iH)(!0);function d(e){const t=e.feature,a=t.getGeometry().getCoordinates();p.value=!1,r.value.location={x:a[0],y:a[1]}}const m=()=>{r.value={id:null,address:"",phoneNumber:"",typeOfAccident:"",typeOfPriorities:"",applicant:"",location:{x:null,y:null}}},f=()=>{o.value=!1,a.push({path:"/statement"})},v=()=>{if(t.state.editingMode){const e=t.state.applications.findIndex((e=>e.id===r.value.id));t.commit("updateApplication",{index:e,application:r.value})}else r.value.id=t.state.applications.length,t.state.applications.push(r.value);localStorage.setItem("applications",JSON.stringify(t.state.applications)),t.commit("clearEditingApplication"),t.commit("setDialog",!1),m(),a.push({path:"/statement"})},g=()=>{m(),t.commit("setEditingMode",!1),t.commit("setDialog",!0),a.push({path:"/statement/add"})};return(0,l.m0)((()=>{o.value=t.state.dialog,t.state.editingApplication&&(r.value={...t.state.editingApplication})})),(e,t)=>{const a=(0,l.up)("ol-view"),n=(0,l.up)("ol-source-osm"),m=(0,l.up)("ol-tile-layer"),h=(0,l.up)("ol-style-stroke"),y=(0,l.up)("ol-style-fill"),w=(0,l.up)("ol-style"),_=(0,l.up)("ol-interaction-draw"),b=(0,l.up)("ol-source-vector"),W=(0,l.up)("ol-style-circle"),O=(0,l.up)("ol-vector-layer"),k=(0,l.up)("ol-map");return(0,l.wg)(),(0,l.j4)(M.o,{justify:"start ml-0"},{default:(0,l.w5)((()=>[(0,l.Wm)(P.B,{modelValue:o.value,"onUpdate:modelValue":t[6]||(t[6]=e=>o.value=e),persistent:"",width:"1024"},{activator:(0,l.w5)((({props:e})=>[(0,l.Wm)(j.T,(0,l.dG)({class:"ml-4",color:"primary"},e,{onClick:g}),{default:(0,l.w5)((()=>[(0,l.Uk)(" Создайте новую заявку! ")])),_:2},1040)])),default:(0,l.w5)((()=>[(0,l.Wm)(i._,null,{default:(0,l.w5)((()=>[(0,l.Wm)(A.E,null,{default:(0,l.w5)((()=>[H])),_:1}),(0,l.Wm)(x.Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(N.K,null,{default:(0,l.w5)((()=>[(0,l._)("form",null,[(0,l.Wm)(M.o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(S.D,{cols:"12",md:"12"},{default:(0,l.w5)((()=>[(0,l.Wm)(E.h,{label:"ФИО*",modelValue:r.value.applicant,"onUpdate:modelValue":t[0]||(t[0]=e=>r.value.applicant=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(S.D,{cols:"12",md:"12"},{default:(0,l.w5)((()=>[(0,l.Wm)(E.h,{label:"Адрес",modelValue:r.value.address,"onUpdate:modelValue":t[1]||(t[1]=e=>r.value.address=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(S.D,{cols:"12",md:"12"},{default:(0,l.w5)((()=>[(0,l._)("div",T,[(0,l.Wm)(k,{loadTilesWhileAnimating:!0,loadTilesWhileInteracting:!0,style:{height:"400px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(a,{ref:"view",center:u.value,zoom:s.value,projection:c.value},null,8,["center","zoom","projection"]),(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(n)])),_:1}),(0,l.Wm)(O,null,{default:(0,l.w5)((()=>[(0,l.Wm)(b,{projection:c.value},{default:(0,l.w5)((()=>[p.value?((0,l.wg)(),(0,l.j4)(_,{key:0,type:"Point",onDrawend:d},{default:(0,l.w5)((()=>[(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h,{color:"blue",width:2}),(0,l.Wm)(y,{color:"rgba(0, 0, 0, 0.4)"})])),_:1})])),_:1})):(0,l.kq)("",!0)])),_:1},8,["projection"]),(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h,{color:"red",width:2}),(0,l.Wm)(y,{color:"rgba(255,255,255,0.1)"}),(0,l.Wm)(W,{radius:5},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{color:"black"})])),_:1})])),_:1})])),_:1})])),_:1})])])),_:1}),(0,l.Wm)(S.D,{cols:"12",md:"12"},{default:(0,l.w5)((()=>[(0,l.Wm)(E.h,{label:"Phone Number",modelValue:r.value.phoneNumber,"onUpdate:modelValue":t[2]||(t[2]=e=>r.value.phoneNumber=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(S.D,{cols:"12"},{default:(0,l.w5)((()=>[(0,l.Wm)(D.rL,{items:["порыв","утечка","колонка уличная","некачественная вода","закупорка","другое"],label:"Тип аварии*",required:"",modelValue:r.value.typeOfAccident,"onUpdate:modelValue":t[3]||(t[3]=e=>r.value.typeOfAccident=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(S.D,{cols:"12"},{default:(0,l.w5)((()=>[(0,l.Wm)(D.rL,{items:["1 – незамедлительно","2 – высокий","3 – средний","4 – низкий"],label:"Приоритет*",required:"",modelValue:r.value.typeOfPriorities,"onUpdate:modelValue":t[4]||(t[4]=e=>r.value.typeOfPriorities=e)},null,8,["modelValue"])])),_:1})])),_:1})])])),_:1}),U])),_:1}),(0,l.Wm)(V.h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(C.C),(0,l.Wm)(j.T,{color:"blue-darken-1",variant:"text",onClick:f},{default:(0,l.w5)((()=>[(0,l.Uk)(" Закрыть ")])),_:1}),(0,l.Wm)(j.T,{color:"blue-darken-1",variant:"text",onClick:t[5]||(t[5]=e=>{v(),o.value=!1})},{default:(0,l.w5)((()=>[(0,l.Uk)(" Сохранить ")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}}};const I=q;var z=I,R=a(7139),G=a(2123),J={__name:"OLMap",props:{locationX:{type:Number,required:!1,default:39.723284},locationY:{type:Number,required:!1,default:47.23135},zoom:{type:Number,required:!0,default:12},locations:{type:Array,required:!0},draggableMarkers:{type:Boolean,required:!1,default:!1}},setup(e){const t=e,a=(0,n.iH)("EPSG:4326"),o=(0,n.iH)(0),i=(0,l.f3)("ol-format"),r=(new i.GeoJSON,(0,n.iH)(null));(0,l.bv)((()=>{if(t.draggableMarkers){const e=new G.Z;r.value.getInteractions().extend([e]),e.on("translateend",(e=>{const t=e.features.item(0),a=t.getGeometry().getCoordinates();console.log("Marker moved to: ",a)}))}}));const u=e=>{const t={"1 – незамедлительно":"red","2 – высокий":"orange","3 – средний":"yellow","4 – низкий":"green"};return t[e]||"blue"};return(t,n)=>{const i=(0,l.up)("ol-view"),c=(0,l.up)("ol-source-osm"),s=(0,l.up)("ol-tile-layer"),p=(0,l.up)("ol-geom-point"),d=(0,l.up)("ol-style-fill"),m=(0,l.up)("ol-style-stroke"),f=(0,l.up)("ol-style-circle"),v=(0,l.up)("ol-style"),g=(0,l.up)("ol-feature"),h=(0,l.up)("ol-source-vector"),y=(0,l.up)("ol-vector-layer"),w=(0,l.up)("ol-map");return(0,l.wg)(),(0,l.j4)(w,{"load-tiles-while-animating":!0,"load-tiles-while-interacting":!0,style:{height:"100%",width:"100%"},ref_key:"mapRef",ref:r},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{ref:"view",center:[e.locationX,e.locationY],zoom:e.zoom,rotation:o.value,projection:a.value},null,8,["center","zoom","rotation","projection"]),(0,l.Wm)(s,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c)])),_:1}),(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.locations,((e,t)=>((0,l.wg)(),(0,l.j4)(g,{key:t},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{coordinates:[e.x,e.y]},null,8,["coordinates"]),(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(f,{radius:5},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{color:u(e.priority)},null,8,["color"]),(0,l.Wm)(m,{color:"black",width:2})])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1},512)}}};const L=J;var Y=L;const Z={class:"last"},F={style:{height:"200px",width:"100%"}};var B={__name:"MyCard",props:{app:{type:Object,required:!0}},setup(e){const t=(0,y.oR)(),a=(0,k.tv)(),o=e=>{t.commit("editApplication",e),t.commit("setEditingMode",!0),t.commit("setDialog",!0),a.push({path:"/statement/add"})};return(t,a)=>((0,l.wg)(),(0,l.iD)("div",{class:"table-with-apps-app",onClick:a[0]||(a[0]=t=>o(e.app))},[(0,l._)("div",null,"Адрес: "+(0,R.zw)(e.app.address),1),(0,l._)("div",null," Тип аварии: "+(0,R.zw)(e.app.typeOfAccident),1),(0,l._)("div",null," Приоритет: "+(0,R.zw)(e.app.typeOfPriorities),1),(0,l._)("div",null,"Заявитель: "+(0,R.zw)(e.app.applicant),1),(0,l._)("div",Z,"Телефон: "+(0,R.zw)(e.app.phoneNumber),1),(0,l._)("div",F,[(0,l.Wm)(Y,{locationX:e.app.location.x,locationY:e.app.location.y,locations:[{x:e.app.location.x,y:e.app.location.y,priority:e.app.typeOfPriorities}]},null,8,["locationX","locationY","locations"])])]))}};const X=(0,v.Z)(B,[["__scopeId","data-v-2ff76282"]]);var K=X,Q={__name:"SearchComponent",setup(e){const t=(0,y.oR)(),a=(0,n.iH)(t.state.search),o=()=>{t.commit("setSearch",a.value)};return(e,t)=>((0,l.wg)(),(0,l.j4)(E.h,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e),"append-icon":"mdi-magnify",label:"Поиск","single-line":"","hide-details":"",onInput:o,class:"search-input"},null,8,["modelValue"]))}};const $=(0,v.Z)(Q,[["__scopeId","data-v-3e480249"]]);var ee=$,te=a(6556);const ae={class:"app"},oe={class:"d-flex mt-8 my-4"};var le={__name:"MyJournal",setup(e){const t=(0,y.oR)(),a=(0,n.iH)(1);localStorage.getItem("applications")&&(t.state.applications=JSON.parse(localStorage.getItem("applications")));const i=(0,l.Fl)((()=>{if(t.state.search){const e=t.state.search.toLowerCase();return t.state.applications.filter((t=>Object.values(t).some((t=>t.toString().toLowerCase().includes(e)))))}return t.state.applications})),r=(0,l.Fl)((()=>{const e=4*(a.value-1),t=e+4;return i.value.slice(e,t)}));return(e,t)=>((0,l.wg)(),(0,l.iD)("div",ae,[(0,l.Wm)(ee,{class:"my-4"}),(0,l.Wm)(z,{class:"my-4"}),(0,l.Wm)(o.W3,{name:"list",tag:"div",class:"table-with-apps my-4"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.value,(e=>((0,l.wg)(),(0,l.j4)(K,{key:e.id,app:e},null,8,["app"])))),128))])),_:1}),(0,l._)("div",oe,[(0,l.Wm)(te.k,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e),length:Math.ceil(i.value.length/4),"total-visible":7,class:"pagination"},null,8,["modelValue","length"])])]))}};const ne=le;var ie=ne,re={__name:"MyMap",setup(e){const t=(0,y.oR)(),a=()=>{const e=localStorage.getItem("applications");return e?JSON.parse(e):[]};t.state.applications=a(),(0,l.m0)((()=>{t.state.applications=a()}));const o=(0,l.Fl)((()=>t.state.applications.map((e=>({x:e.location.x,y:e.location.y,priority:e.typeOfPriorities})))));return(e,t)=>((0,l.wg)(),(0,l.j4)(Y,{style:{height:"100vh"},locations:o.value},null,8,["locations"]))}};const ue=re;var ce=ue,se=(0,k.p7)({history:(0,k.r5)(),routes:[{path:"/",redirect:"/statement"},{path:"/statement",name:"journal",component:ie,children:[{path:"add",name:"dialog",component:z}]},{path:"/map",name:"map",component:ce}]});async function pe(){const e=await a.e(461).then(a.t.bind(a,3657,23));e.load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}var de=a(3998);pe(),(0,o.ri)(h).use(b).use(se).use(O).use(de.ZP).mount("#app")}},t={};function a(o){var l=t[o];if(void 0!==l)return l.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,o,l,n){if(!o){var i=1/0;for(s=0;s<e.length;s++){o=e[s][0],l=e[s][1],n=e[s][2];for(var r=!0,u=0;u<o.length;u++)(!1&n||i>=n)&&Object.keys(a.O).every((function(e){return a.O[e](o[u])}))?o.splice(u--,1):(r=!1,n<i&&(i=n));if(r){e.splice(s--,1);var c=l();void 0!==c&&(t=c)}}return t}n=n||0;for(var s=e.length;s>0&&e[s-1][2]>n;s--)e[s]=e[s-1];e[s]=[o,l,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};a.t=function(o,l){if(1&l&&(o=this(o)),8&l)return o;if("object"===typeof o&&o){if(4&l&&o.__esModule)return o;if(16&l&&"function"===typeof o.then)return o}var n=Object.create(null);a.r(n);var i={};e=e||[null,t({}),t([]),t(t)];for(var r=2&l&&o;"object"==typeof r&&!~e.indexOf(r);r=t(r))Object.getOwnPropertyNames(r).forEach((function(e){i[e]=function(){return o[e]}}));return i["default"]=function(){return o},a.d(n,i),n}}(),function(){a.d=function(e,t){for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,o){return a.f[o](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/webfontloader.f6b3c0db.js"}}(),function(){a.miniCssF=function(e){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="reg-of-app:";a.l=function(o,l,n,i){if(e[o])e[o].push(l);else{var r,u;if(void 0!==n)for(var c=document.getElementsByTagName("script"),s=0;s<c.length;s++){var p=c[s];if(p.getAttribute("src")==o||p.getAttribute("data-webpack")==t+n){r=p;break}}r||(u=!0,r=document.createElement("script"),r.charset="utf-8",r.timeout=120,a.nc&&r.setAttribute("nonce",a.nc),r.setAttribute("data-webpack",t+n),r.src=o),e[o]=[l];var d=function(t,a){r.onerror=r.onload=null,clearTimeout(m);var l=e[o];if(delete e[o],r.parentNode&&r.parentNode.removeChild(r),l&&l.forEach((function(e){return e(a)})),t)return t(a)},m=setTimeout(d.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=d.bind(null,r.onerror),r.onload=d.bind(null,r.onload),u&&document.head.appendChild(r)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var e={143:0};a.f.j=function(t,o){var l=a.o(e,t)?e[t]:void 0;if(0!==l)if(l)o.push(l[2]);else{var n=new Promise((function(a,o){l=e[t]=[a,o]}));o.push(l[2]=n);var i=a.p+a.u(t),r=new Error,u=function(o){if(a.o(e,t)&&(l=e[t],0!==l&&(e[t]=void 0),l)){var n=o&&("load"===o.type?"missing":o.type),i=o&&o.target&&o.target.src;r.message="Loading chunk "+t+" failed.\n("+n+": "+i+")",r.name="ChunkLoadError",r.type=n,r.request=i,l[1](r)}};a.l(i,u,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,o){var l,n,i=o[0],r=o[1],u=o[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(l in r)a.o(r,l)&&(a.m[l]=r[l]);if(u)var s=u(a)}for(t&&t(o);c<i.length;c++)n=i[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(s)},o=self["webpackChunkreg_of_app"]=self["webpackChunkreg_of_app"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=a.O(void 0,[998],(function(){return a(829)}));o=a.O(o)})();
//# sourceMappingURL=app.a69fa241.js.map